import React from "react";
import { createRef } from "react";
import { useEffect, useState } from "react";
import { ADRESS } from "../redux";
import "./table.scss"

function Table() {


    const [state, setState] = useState([])
    const [pass, setPass] = useState("")



    useEffect(() => {
        fetch(`http://${ADRESS}:100/gettingusers`)
        .then(response => response.json())
        .then(json => setState(json))
    }, [])

    let passTable = createRef();


    function passFoo() {
        setPass(passTable.current.value)
    }



    if (pass === "333") {
        return(
            <div className="table">
                <table>
                   {state.map(el => {
                        return (<tr>
                        <td>ID: {el.id}</td>
                        <td>Имя: {el.name}</td>
                        <td>Логин: {el.login}</td>
                        <td>Пароль: {el.password}</td>
                        <td>Родитель: {el.parent}</td>
                        <td>Телефон: {el.phone}</td>
                        {/* <svg onClick={() => {alert(232)}} width="34" height="34" viewBox="0 0 54 54" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M32.625 30.75C34.1168 30.75 35.5476 31.3427 36.6025 32.3976C37.6574 33.4525 38.25 34.8832 38.25 36.375V38.25C38.25 45.6413 31.275 53.25 19.5 53.25C7.725 53.25 0.75 45.6413 0.75 38.25V36.375C0.75 34.8832 1.34263 33.4525 2.39752 32.3976C3.45242 31.3427 4.88316 30.75 6.375 30.75H32.625ZM32.625 34.5H6.375C5.87772 34.5 5.40081 34.6976 5.04918 35.0492C4.69754 35.4009 4.5 35.8778 4.5 36.375V38.25C4.5 43.6425 9.87 49.5 19.5 49.5C29.13 49.5 34.5 43.6425 34.5 38.25V36.375C34.5 35.8778 34.3025 35.4009 33.9508 35.0492C33.5992 34.6976 33.1223 34.5 32.625 34.5ZM19.5 6.37505C22.235 6.37505 24.8581 7.46154 26.792 9.39551C28.726 11.3295 29.8125 13.9525 29.8125 16.6875C29.8125 19.4226 28.726 22.0456 26.792 23.9796C24.8581 25.9136 22.235 27 19.5 27C16.765 27 14.1419 25.9136 12.208 23.9796C10.274 22.0456 9.1875 19.4226 9.1875 16.6875C9.1875 13.9525 10.274 11.3295 12.208 9.39551C14.1419 7.46154 16.765 6.37505 19.5 6.37505ZM19.5 10.125C17.7595 10.125 16.0903 10.8165 14.8596 12.0472C13.6289 13.2779 12.9375 14.9471 12.9375 16.6875C12.9375 18.428 13.6289 20.0972 14.8596 21.3279C16.0903 22.5586 17.7595 23.25 19.5 23.25C21.2405 23.25 22.9097 22.5586 24.1404 21.3279C25.3711 20.0972 26.0625 18.428 26.0625 16.6875C26.0625 14.9471 25.3711 13.2779 24.1404 12.0472C22.9097 10.8165 21.2405 10.125 19.5 10.125ZM37.44 1.0838L37.7025 1.29755L43.875 7.4738L50.0475 1.29755C50.3996 0.945474 50.8771 0.747681 51.375 0.747681C51.8729 0.747681 52.3504 0.945474 52.7025 1.29755C53.0546 1.64962 53.2524 2.12714 53.2524 2.62505C53.2524 3.12296 53.0546 3.60047 52.7025 3.95255L46.5262 10.125L52.7025 16.2975C53.0125 16.6083 53.2037 17.0179 53.2428 17.4551C53.2818 17.8923 53.1663 18.3293 52.9163 18.6901L52.7025 18.9526C52.3918 19.2626 51.9822 19.4538 51.545 19.4928C51.1078 19.5319 50.6707 19.4163 50.31 19.1663L50.0475 18.9526L43.875 12.7763L37.7025 18.9526C37.3504 19.3046 36.8729 19.5024 36.375 19.5024C35.8771 19.5024 35.3996 19.3046 35.0475 18.9526C34.6954 18.6005 34.4976 18.123 34.4976 17.625C34.4976 17.1271 34.6954 16.6496 35.0475 16.2975L41.2238 10.125L35.0475 3.95255C34.7375 3.64184 34.5463 3.23221 34.5072 2.79502C34.4682 2.35783 34.5837 1.9208 34.8337 1.56005L35.0475 1.29755C35.3186 1.02747 35.6658 0.846777 36.0425 0.779744C36.4192 0.712711 36.8074 0.762543 37.155 0.922549L37.44 1.0838Z" fill="#5C7AE3"/>
    </svg> */}
                    </tr>)
                   })}
                </table>
            </div>
        )
    }
    else {
        return (
            <div className="login__window">
                <form action="">
                    <input className="login__password" ref = {passTable} type="text" placeholder="Введите пароль" />
                    <div className="gradient login__btn" onClick={() => passFoo()}>Войти</div>
                </form>
            </div>

        )
    }   
}

export default Table